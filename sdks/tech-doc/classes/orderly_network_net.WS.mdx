[Orderly SDKs](./../README) / [Modules](./../modules) / [@orderly.network/net](./../modules/orderly_network_net) / WS

# Class: WS

[@orderly.network/net](./../modules/orderly_network_net).WS

## Table of contents

### Constructors

- [constructor](./orderly_network_net.WS#constructor)

### Properties

- [\_eventContainer](./orderly_network_net.WS#_eventcontainer)
- [\_eventHandlers](./orderly_network_net.WS#_eventhandlers)
- [\_eventPrivateHandlers](./orderly_network_net.WS#_eventprivatehandlers)
- [\_pendingPrivateSubscribe](./orderly_network_net.WS#_pendingprivatesubscribe)
- [\_pendingPublicSubscribe](./orderly_network_net.WS#_pendingpublicsubscribe)
- [\_privateHeartbeatTime](./orderly_network_net.WS#_privateheartbeattime)
- [\_privateRetryCount](./orderly_network_net.WS#_privateretrycount)
- [\_publicHeartbeatTime](./orderly_network_net.WS#_publicheartbeattime)
- [\_publicRetryCount](./orderly_network_net.WS#_publicretrycount)
- [\_publicSocket](./orderly_network_net.WS#_publicsocket)
- [authenticated](./orderly_network_net.WS#authenticated)
- [options](./orderly_network_net.WS#options)
- [privateIsReconnecting](./orderly_network_net.WS#privateisreconnecting)
- [privateSocket](./orderly_network_net.WS#privatesocket)
- [publicIsReconnecting](./orderly_network_net.WS#publicisreconnecting)
- [reconnectInterval](./orderly_network_net.WS#reconnectinterval)

### Accessors

- [accountId](./orderly_network_net.WS#accountid)
- [client](./orderly_network_net.WS#client)

### Methods

- [authenticate](./orderly_network_net.WS#authenticate)
- [bindEvents](./orderly_network_net.WS#bindevents)
- [checkSocketStatus](./orderly_network_net.WS#checksocketstatus)
- [close](./orderly_network_net.WS#close)
- [closePrivate](./orderly_network_net.WS#closeprivate)
- [createPrivateSC](./orderly_network_net.WS#createprivatesc)
- [createPublicSC](./orderly_network_net.WS#createpublicsc)
- [emit](./orderly_network_net.WS#emit)
- [errorBoardscast](./orderly_network_net.WS#errorboardscast)
- [generateMessage](./orderly_network_net.WS#generatemessage)
- [getTopicKeyFromMessage](./orderly_network_net.WS#gettopickeyfrommessage)
- [getTopicKeyFromParams](./orderly_network_net.WS#gettopickeyfromparams)
- [handlePendingPrivateTopic](./orderly_network_net.WS#handlependingprivatetopic)
- [off](./orderly_network_net.WS#off)
- [on](./orderly_network_net.WS#on)
- [onMessage](./orderly_network_net.WS#onmessage)
- [onNetworkStatusChange](./orderly_network_net.WS#onnetworkstatuschange)
- [onOpen](./orderly_network_net.WS#onopen)
- [onPrivateClose](./orderly_network_net.WS#onprivateclose)
- [onPrivateError](./orderly_network_net.WS#onprivateerror)
- [onPrivateMessage](./orderly_network_net.WS#onprivatemessage)
- [onPrivateOpen](./orderly_network_net.WS#onprivateopen)
- [onPublicClose](./orderly_network_net.WS#onpublicclose)
- [onPublicError](./orderly_network_net.WS#onpublicerror)
- [onPublicMessage](./orderly_network_net.WS#onpublicmessage)
- [onVisibilityChange](./orderly_network_net.WS#onvisibilitychange)
- [onceSubscribe](./orderly_network_net.WS#oncesubscribe)
- [openPrivate](./orderly_network_net.WS#openprivate)
- [privateSubscribe](./orderly_network_net.WS#privatesubscribe)
- [reconnectPrivate](./orderly_network_net.WS#reconnectprivate)
- [reconnectPublic](./orderly_network_net.WS#reconnectpublic)
- [send](./orderly_network_net.WS#send)
- [subscribe](./orderly_network_net.WS#subscribe)
- [unsubscribe](./orderly_network_net.WS#unsubscribe)
- [unsubscribePrivate](./orderly_network_net.WS#unsubscribeprivate)
- [unsubscribePublic](./orderly_network_net.WS#unsubscribepublic)

## Constructors

### constructor

• **new WS**(`options`)

#### Parameters

| Name | Type |
| :------ | :------ |
| `options` | `WSOptions` |

#### Defined in

[ws/ws.ts:82](https://github.com/OrderlyNetwork/js-sdk/blob/6414be9e/packages/net/src/ws/ws.ts#L82)

## Properties

### \_eventContainer

• `Private` **\_eventContainer**: `Map`\<`string`, `Set`\<`Function`\>\>

#### Defined in

[ws/ws.ts:60](https://github.com/OrderlyNetwork/js-sdk/blob/6414be9e/packages/net/src/ws/ws.ts#L60)

___

### \_eventHandlers

• `Private` **\_eventHandlers**: `Map`\<`string`, `Topics`\>

#### Defined in

[ws/ws.ts:73](https://github.com/OrderlyNetwork/js-sdk/blob/6414be9e/packages/net/src/ws/ws.ts#L73)

___

### \_eventPrivateHandlers

• `Private` **\_eventPrivateHandlers**: `Map`\<`string`, `Topics`\>

#### Defined in

[ws/ws.ts:74](https://github.com/OrderlyNetwork/js-sdk/blob/6414be9e/packages/net/src/ws/ws.ts#L74)

___

### \_pendingPrivateSubscribe

• `Private` **\_pendingPrivateSubscribe**: `any`[][] = `[]`

#### Defined in

[ws/ws.ts:69](https://github.com/OrderlyNetwork/js-sdk/blob/6414be9e/packages/net/src/ws/ws.ts#L69)

___

### \_pendingPublicSubscribe

• `Private` **\_pendingPublicSubscribe**: `any`[][] = `[]`

#### Defined in

[ws/ws.ts:70](https://github.com/OrderlyNetwork/js-sdk/blob/6414be9e/packages/net/src/ws/ws.ts#L70)

___

### \_privateHeartbeatTime

• `Private` `Optional` **\_privateHeartbeatTime**: `number`

#### Defined in

[ws/ws.ts:77](https://github.com/OrderlyNetwork/js-sdk/blob/6414be9e/packages/net/src/ws/ws.ts#L77)

___

### \_privateRetryCount

• `Private` **\_privateRetryCount**: `number` = `0`

#### Defined in

[ws/ws.ts:80](https://github.com/OrderlyNetwork/js-sdk/blob/6414be9e/packages/net/src/ws/ws.ts#L80)

___

### \_publicHeartbeatTime

• `Private` `Optional` **\_publicHeartbeatTime**: `number`

#### Defined in

[ws/ws.ts:76](https://github.com/OrderlyNetwork/js-sdk/blob/6414be9e/packages/net/src/ws/ws.ts#L76)

___

### \_publicRetryCount

• `Private` **\_publicRetryCount**: `number` = `0`

#### Defined in

[ws/ws.ts:79](https://github.com/OrderlyNetwork/js-sdk/blob/6414be9e/packages/net/src/ws/ws.ts#L79)

___

### \_publicSocket

• `Private` **\_publicSocket**: `WebSocket`

#### Defined in

[ws/ws.ts:57](https://github.com/OrderlyNetwork/js-sdk/blob/6414be9e/packages/net/src/ws/ws.ts#L57)

___

### authenticated

• `Private` **authenticated**: `boolean` = `false`

#### Defined in

[ws/ws.ts:67](https://github.com/OrderlyNetwork/js-sdk/blob/6414be9e/packages/net/src/ws/ws.ts#L67)

___

### options

• `Private` **options**: `WSOptions`

#### Defined in

[ws/ws.ts:82](https://github.com/OrderlyNetwork/js-sdk/blob/6414be9e/packages/net/src/ws/ws.ts#L82)

___

### privateIsReconnecting

• `Private` **privateIsReconnecting**: `boolean` = `false`

#### Defined in

[ws/ws.ts:63](https://github.com/OrderlyNetwork/js-sdk/blob/6414be9e/packages/net/src/ws/ws.ts#L63)

___

### privateSocket

• `Private` `Optional` **privateSocket**: `WebSocket`

#### Defined in

[ws/ws.ts:58](https://github.com/OrderlyNetwork/js-sdk/blob/6414be9e/packages/net/src/ws/ws.ts#L58)

___

### publicIsReconnecting

• `Private` **publicIsReconnecting**: `boolean` = `false`

#### Defined in

[ws/ws.ts:62](https://github.com/OrderlyNetwork/js-sdk/blob/6414be9e/packages/net/src/ws/ws.ts#L62)

___

### reconnectInterval

• `Private` **reconnectInterval**: `number` = `1000`

#### Defined in

[ws/ws.ts:65](https://github.com/OrderlyNetwork/js-sdk/blob/6414be9e/packages/net/src/ws/ws.ts#L65)

## Accessors

### accountId

• `set` **accountId**(`accountId`): `void`

#### Parameters

| Name | Type |
| :------ | :------ |
| `accountId` | `string` |

#### Returns

`void`

#### Defined in

[ws/ws.ts:435](https://github.com/OrderlyNetwork/js-sdk/blob/6414be9e/packages/net/src/ws/ws.ts#L435)

___

### client

• `get` **client**(): `Object`

#### Returns

`Object`

| Name | Type |
| :------ | :------ |
| `private?` | `WebSocket` |
| `public` | `WebSocket` |

#### Defined in

[ws/ws.ts:716](https://github.com/OrderlyNetwork/js-sdk/blob/6414be9e/packages/net/src/ws/ws.ts#L716)

## Methods

### authenticate

▸ `Private` **authenticate**(`accountId`): `Promise`\<`void`\>

#### Parameters

| Name | Type |
| :------ | :------ |
| `accountId` | `string` |

#### Returns

`Promise`\<`void`\>

#### Defined in

[ws/ws.ts:437](https://github.com/OrderlyNetwork/js-sdk/blob/6414be9e/packages/net/src/ws/ws.ts#L437)

___

### bindEvents

▸ `Private` **bindEvents**(): `void`

#### Returns

`void`

#### Defined in

[ws/ws.ts:92](https://github.com/OrderlyNetwork/js-sdk/blob/6414be9e/packages/net/src/ws/ws.ts#L92)

___

### checkSocketStatus

▸ `Private` **checkSocketStatus**(): `void`

Determine the current connection status,
1. If it is disconnected, reconnect
2. If no message is received for too long, disconnect and reconnect actively
3. When returning from the background and the network status changes, the following process is followed

#### Returns

`void`

#### Defined in

[ws/ws.ts:128](https://github.com/OrderlyNetwork/js-sdk/blob/6414be9e/packages/net/src/ws/ws.ts#L128)

___

### close

▸ **close**(): `void`

#### Returns

`void`

#### Defined in

[ws/ws.ts:430](https://github.com/OrderlyNetwork/js-sdk/blob/6414be9e/packages/net/src/ws/ws.ts#L430)

___

### closePrivate

▸ **closePrivate**(`code?`, `reason?`): `void`

#### Parameters

| Name | Type |
| :------ | :------ |
| `code?` | `number` |
| `reason?` | `string` |

#### Returns

`void`

#### Defined in

[ws/ws.ts:184](https://github.com/OrderlyNetwork/js-sdk/blob/6414be9e/packages/net/src/ws/ws.ts#L184)

___

### createPrivateSC

▸ `Private` **createPrivateSC**(`options`): `void`

#### Parameters

| Name | Type |
| :------ | :------ |
| `options` | `WSOptions` |

#### Returns

`void`

#### Defined in

[ws/ws.ts:216](https://github.com/OrderlyNetwork/js-sdk/blob/6414be9e/packages/net/src/ws/ws.ts#L216)

___

### createPublicSC

▸ `Private` **createPublicSC**(`options`): `void`

#### Parameters

| Name | Type |
| :------ | :------ |
| `options` | `WSOptions` |

#### Returns

`void`

#### Defined in

[ws/ws.ts:198](https://github.com/OrderlyNetwork/js-sdk/blob/6414be9e/packages/net/src/ws/ws.ts#L198)

___

### emit

▸ **emit**(`eventName`, `message`): `void`

#### Parameters

| Name | Type |
| :------ | :------ |
| `eventName` | `string` |
| `message` | `any` |

#### Returns

`void`

#### Defined in

[ws/ws.ts:739](https://github.com/OrderlyNetwork/js-sdk/blob/6414be9e/packages/net/src/ws/ws.ts#L739)

___

### errorBoardscast

▸ `Private` **errorBoardscast**(`error`, `eventHandlers`): `void`

#### Parameters

| Name | Type |
| :------ | :------ |
| `error` | `any` |
| `eventHandlers` | `Map`\<`string`, `Topics`\> |

#### Returns

`void`

#### Defined in

[ws/ws.ts:409](https://github.com/OrderlyNetwork/js-sdk/blob/6414be9e/packages/net/src/ws/ws.ts#L409)

___

### generateMessage

▸ `Private` **generateMessage**(`params`, `onUnsubscribe?`, `onMessage?`): [`MessageParams`, (`event`: `string`) => `any`]

#### Parameters

| Name | Type |
| :------ | :------ |
| `params` | `any` |
| `onUnsubscribe?` | (`event`: `string`) => `any` |
| `onMessage?` | (`message`: `any`) => `any` |

#### Returns

[`MessageParams`, (`event`: `string`) => `any`]

#### Defined in

[ws/ws.ts:655](https://github.com/OrderlyNetwork/js-sdk/blob/6414be9e/packages/net/src/ws/ws.ts#L655)

___

### getTopicKeyFromMessage

▸ `Private` **getTopicKeyFromMessage**(`message`): `string`

#### Parameters

| Name | Type |
| :------ | :------ |
| `message` | `any` |

#### Returns

`string`

#### Defined in

[ws/ws.ts:582](https://github.com/OrderlyNetwork/js-sdk/blob/6414be9e/packages/net/src/ws/ws.ts#L582)

___

### getTopicKeyFromParams

▸ `Private` **getTopicKeyFromParams**(`params`): `string`

#### Parameters

| Name | Type |
| :------ | :------ |
| `params` | `any` |

#### Returns

`string`

#### Defined in

[ws/ws.ts:565](https://github.com/OrderlyNetwork/js-sdk/blob/6414be9e/packages/net/src/ws/ws.ts#L565)

___

### handlePendingPrivateTopic

▸ `Private` **handlePendingPrivateTopic**(): `void`

#### Returns

`void`

#### Defined in

[ws/ws.ts:318](https://github.com/OrderlyNetwork/js-sdk/blob/6414be9e/packages/net/src/ws/ws.ts#L318)

___

### off

▸ **off**(`eventName`, `callback`): `void`

#### Parameters

| Name | Type |
| :------ | :------ |
| `eventName` | `string` |
| `callback` | (`message`: `any`) => `any` |

#### Returns

`void`

#### Defined in

[ws/ws.ts:733](https://github.com/OrderlyNetwork/js-sdk/blob/6414be9e/packages/net/src/ws/ws.ts#L733)

___

### on

▸ **on**(`eventName`, `callback`): `void`

#### Parameters

| Name | Type |
| :------ | :------ |
| `eventName` | `string` |
| `callback` | (`message`: `any`) => `any` |

#### Returns

`void`

#### Defined in

[ws/ws.ts:726](https://github.com/OrderlyNetwork/js-sdk/blob/6414be9e/packages/net/src/ws/ws.ts#L726)

___

### onMessage

▸ `Private` **onMessage**(`event`, `socket`, `handlerMap`): `void`

#### Parameters

| Name | Type |
| :------ | :------ |
| `event` | `MessageEvent`\<`any`\> |
| `socket` | `WebSocket` |
| `handlerMap` | `Map`\<`string`, `Topics`\> |

#### Returns

`void`

#### Defined in

[ws/ws.ts:255](https://github.com/OrderlyNetwork/js-sdk/blob/6414be9e/packages/net/src/ws/ws.ts#L255)

___

### onNetworkStatusChange

▸ `Private` **onNetworkStatusChange**(): `void`

#### Returns

`void`

#### Defined in

[ws/ws.ts:116](https://github.com/OrderlyNetwork/js-sdk/blob/6414be9e/packages/net/src/ws/ws.ts#L116)

___

### onOpen

▸ `Private` **onOpen**(`event`): `void`

#### Parameters

| Name | Type |
| :------ | :------ |
| `event` | `Event` |

#### Returns

`void`

#### Defined in

[ws/ws.ts:231](https://github.com/OrderlyNetwork/js-sdk/blob/6414be9e/packages/net/src/ws/ws.ts#L231)

___

### onPrivateClose

▸ `Private` **onPrivateClose**(`event`): `void`

#### Parameters

| Name | Type |
| :------ | :------ |
| `event` | `CloseEvent` |

#### Returns

`void`

#### Defined in

[ws/ws.ts:345](https://github.com/OrderlyNetwork/js-sdk/blob/6414be9e/packages/net/src/ws/ws.ts#L345)

___

### onPrivateError

▸ `Private` **onPrivateError**(`event`): `void`

#### Parameters

| Name | Type |
| :------ | :------ |
| `event` | `Event` |

#### Returns

`void`

#### Defined in

[ws/ws.ts:389](https://github.com/OrderlyNetwork/js-sdk/blob/6414be9e/packages/net/src/ws/ws.ts#L389)

___

### onPrivateMessage

▸ `Private` **onPrivateMessage**(`event`): `void`

#### Parameters

| Name | Type |
| :------ | :------ |
| `event` | `MessageEvent`\<`any`\> |

#### Returns

`void`

#### Defined in

[ws/ws.ts:312](https://github.com/OrderlyNetwork/js-sdk/blob/6414be9e/packages/net/src/ws/ws.ts#L312)

___

### onPrivateOpen

▸ `Private` **onPrivateOpen**(`event`): `void`

#### Parameters

| Name | Type |
| :------ | :------ |
| `event` | `Event` |

#### Returns

`void`

#### Defined in

[ws/ws.ts:246](https://github.com/OrderlyNetwork/js-sdk/blob/6414be9e/packages/net/src/ws/ws.ts#L246)

___

### onPublicClose

▸ `Private` **onPublicClose**(`event`): `void`

#### Parameters

| Name | Type |
| :------ | :------ |
| `event` | `CloseEvent` |

#### Returns

`void`

#### Defined in

[ws/ws.ts:327](https://github.com/OrderlyNetwork/js-sdk/blob/6414be9e/packages/net/src/ws/ws.ts#L327)

___

### onPublicError

▸ `Private` **onPublicError**(`event`): `void`

#### Parameters

| Name | Type |
| :------ | :------ |
| `event` | `Event` |

#### Returns

`void`

#### Defined in

[ws/ws.ts:366](https://github.com/OrderlyNetwork/js-sdk/blob/6414be9e/packages/net/src/ws/ws.ts#L366)

___

### onPublicMessage

▸ `Private` **onPublicMessage**(`event`): `void`

#### Parameters

| Name | Type |
| :------ | :------ |
| `event` | `MessageEvent`\<`any`\> |

#### Returns

`void`

#### Defined in

[ws/ws.ts:306](https://github.com/OrderlyNetwork/js-sdk/blob/6414be9e/packages/net/src/ws/ws.ts#L306)

___

### onVisibilityChange

▸ `Private` **onVisibilityChange**(): `void`

#### Returns

`void`

#### Defined in

[ws/ws.ts:106](https://github.com/OrderlyNetwork/js-sdk/blob/6414be9e/packages/net/src/ws/ws.ts#L106)

___

### onceSubscribe

▸ **onceSubscribe**(`params`, `callback`): `void`

#### Parameters

| Name | Type |
| :------ | :------ |
| `params` | `any` |
| `callback` | `Omit`\<`WSMessageHandler`, ``"onUnsubscribe"``\> |

#### Returns

`void`

#### Defined in

[ws/ws.ts:603](https://github.com/OrderlyNetwork/js-sdk/blob/6414be9e/packages/net/src/ws/ws.ts#L603)

___

### openPrivate

▸ **openPrivate**(`accountId`): `void`

#### Parameters

| Name | Type |
| :------ | :------ |
| `accountId` | `string` |

#### Returns

`void`

#### Defined in

[ws/ws.ts:174](https://github.com/OrderlyNetwork/js-sdk/blob/6414be9e/packages/net/src/ws/ws.ts#L174)

___

### privateSubscribe

▸ **privateSubscribe**(`params`, `callback`): () => `void`

#### Parameters

| Name | Type |
| :------ | :------ |
| `params` | `any` |
| `callback` | `WSMessageHandler` \| `Omit`\<`WSMessageHandler`, ``"onUnsubscribe"``\> |

#### Returns

`fn`

▸ (): `void`

##### Returns

`void`

#### Defined in

[ws/ws.ts:465](https://github.com/OrderlyNetwork/js-sdk/blob/6414be9e/packages/net/src/ws/ws.ts#L465)

___

### reconnectPrivate

▸ `Private` **reconnectPrivate**(): `void`

#### Returns

`void`

#### Defined in

[ws/ws.ts:695](https://github.com/OrderlyNetwork/js-sdk/blob/6414be9e/packages/net/src/ws/ws.ts#L695)

___

### reconnectPublic

▸ `Private` **reconnectPublic**(): `void`

#### Returns

`void`

#### Defined in

[ws/ws.ts:679](https://github.com/OrderlyNetwork/js-sdk/blob/6414be9e/packages/net/src/ws/ws.ts#L679)

___

### send

▸ **send**(`message`): `void`

#### Parameters

| Name | Type |
| :------ | :------ |
| `message` | `any` |

#### Returns

`void`

#### Defined in

[ws/ws.ts:417](https://github.com/OrderlyNetwork/js-sdk/blob/6414be9e/packages/net/src/ws/ws.ts#L417)

___

### subscribe

▸ **subscribe**(`params`, `callback`, `once?`, `id?`): `undefined` \| `unsubscribe`

#### Parameters

| Name | Type |
| :------ | :------ |
| `params` | `any` |
| `callback` | `WSMessageHandler` \| `Omit`\<`WSMessageHandler`, ``"onUnsubscribe"``\> |
| `once?` | `boolean` |
| `id?` | `string` |

#### Returns

`undefined` \| `unsubscribe`

#### Defined in

[ws/ws.ts:504](https://github.com/OrderlyNetwork/js-sdk/blob/6414be9e/packages/net/src/ws/ws.ts#L504)

___

### unsubscribe

▸ `Private` **unsubscribe**(`parmas`, `webSocket`, `handlerMap`): `void`

#### Parameters

| Name | Type |
| :------ | :------ |
| `parmas` | `MessageParams` |
| `webSocket` | `WebSocket` |
| `handlerMap` | `Map`\<`string`, `Topics`\> |

#### Returns

`void`

#### Defined in

[ws/ws.ts:610](https://github.com/OrderlyNetwork/js-sdk/blob/6414be9e/packages/net/src/ws/ws.ts#L610)

___

### unsubscribePrivate

▸ `Private` **unsubscribePrivate**(`parmas`): `void`

#### Parameters

| Name | Type |
| :------ | :------ |
| `parmas` | `MessageParams` |

#### Returns

`void`

#### Defined in

[ws/ws.ts:647](https://github.com/OrderlyNetwork/js-sdk/blob/6414be9e/packages/net/src/ws/ws.ts#L647)

___

### unsubscribePublic

▸ `Private` **unsubscribePublic**(`parmas`): `void`

#### Parameters

| Name | Type |
| :------ | :------ |
| `parmas` | `MessageParams` |

#### Returns

`void`

#### Defined in

[ws/ws.ts:651](https://github.com/OrderlyNetwork/js-sdk/blob/6414be9e/packages/net/src/ws/ws.ts#L651)
